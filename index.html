<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TROY Sandbox â€” Landing Page Builder</title>

    <!-- Typekit Fonts (Troy University) -->
    <link rel="stylesheet" href="https://use.typekit.net/yie8ysb.css">

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                fontFamily: {
                    'headline-primary': ['pressio-x-compressed', 'sans-serif'],
                    'headline-secondary': ['pressio-compressed', 'sans-serif'],
                    'subhead': ['avenir-lt-pro', 'sans-serif'],
                    'body': ['avenir-lt-pro', 'sans-serif'],
                },
                extend: {
                    colors: {
                        cardinal: {
                            DEFAULT: '#910039',
                            800: '#910039',
                            900: '#720724',
                        },
                        sand: {
                            DEFAULT: '#f1efe3',
                            300: '#e8e6da',
                        },
                        wheat: {
                            DEFAULT: '#efd19f',
                            light: '#f5e1b3',
                        },
                        grey: '#999999',
                    },
                    aspectRatio: {
                        'feature': '16 / 9',
                    },
                }
            }
        }
    </script>

    <!-- Base Component Styles -->
    <link rel="stylesheet" href="static/base.css">

    <!-- Editor UI styles -->
    <link rel="stylesheet" href="styles/editor.css">
</head>
<body class="bg-gray-100 min-h-screen font-body">
    <!-- App Shell -->
    <div id="app" class="flex h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 bg-white border-r border-gray-200 flex flex-col">
            <!-- Logo/Title -->
            <div class="p-4 border-b border-gray-200">
                <h1 class="text-lg font-bold text-cardinal">TROY Sandbox</h1>
                <p class="text-xs text-gray-500">Landing Page Builder</p>
            </div>

            <!-- Section Buttons -->
            <div id="section-buttons" class="flex-1 overflow-y-auto p-4">
                <p class="text-sm text-gray-400">Loading sections...</p>
            </div>

            <!-- Actions -->
            <div class="p-4 border-t border-gray-200 space-y-2">
                <div class="flex gap-2">
                    <button id="undo-btn" class="flex-1 px-3 py-2 text-sm bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        Undo
                    </button>
                    <button id="redo-btn" class="flex-1 px-3 py-2 text-sm bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        Redo
                    </button>
                </div>
                <button id="export-btn" class="w-full px-3 py-2 text-sm bg-cardinal text-white rounded hover:bg-cardinal-900">
                    Export JSON
                </button>
                <button id="import-btn" class="w-full px-3 py-2 text-sm bg-gray-100 rounded hover:bg-gray-200">
                    Import JSON
                </button>
                <input type="file" id="import-input" accept=".json" class="hidden">
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto bg-gray-200">
            <!-- Toolbar -->
            <div id="toolbar" class="sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <button id="sidebar-toggle" title="Toggle Sidebar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="18" rx="1"/>
                            <path d="M14 4h7M14 12h7M14 20h7"/>
                        </svg>
                    </button>
                    <span class="text-sm text-gray-600">Canvas</span>
                </div>
                <span id="section-count" class="text-xs text-gray-400">0 sections</span>
            </div>

            <!-- Canvas -->
            <div id="canvas-wrapper" class="overflow-y-auto">
                <div id="canvas" class="bg-white min-h-full">
                    <!-- Static Header -->
                    <div id="static-header"></div>

                    <!-- Editable Sections -->
                    <div id="sections-container">
                        <div class="p-12 text-center text-gray-400">
                            <p class="text-lg mb-2">No sections yet</p>
                            <p class="text-sm">Click a section type in the sidebar to add it</p>
                        </div>
                    </div>

                    <!-- Static Footer -->
                    <div id="static-footer"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Image Upload Modal -->
    <div id="image-modal" class="hidden fixed inset-0 z-50 bg-black/50 flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6">
            <h3 class="text-lg font-bold mb-4">Upload Image</h3>
            <div id="image-drop-zone" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-cardinal">
                <p class="text-gray-500">Drag & drop an image here, or click to select</p>
                <input type="file" id="image-file-input" accept="image/*" class="hidden">
            </div>
            <div id="image-preview" class="hidden mt-4">
                <img id="preview-img" class="max-h-48 mx-auto rounded">
            </div>
            <div class="flex gap-2 mt-6">
                <button id="image-cancel-btn" class="flex-1 px-4 py-2 bg-gray-100 rounded hover:bg-gray-200">Cancel</button>
                <button id="image-confirm-btn" class="flex-1 px-4 py-2 bg-cardinal text-white rounded hover:bg-cardinal-900 disabled:opacity-50" disabled>Upload</button>
            </div>
        </div>
    </div>

    <!-- Visibility Popover Template -->
    <div id="visibility-popover" class="hidden absolute z-40 bg-white rounded-lg shadow-xl border p-4 w-64">
        <div class="flex justify-between items-center mb-3">
            <span class="font-semibold text-sm">Field Visibility</span>
            <button id="visibility-close" class="text-gray-400 hover:text-gray-600">&times;</button>
        </div>
        <div id="visibility-fields" class="space-y-2 max-h-64 overflow-y-auto"></div>
        <div class="flex gap-2 mt-3 pt-3 border-t">
            <button id="visibility-show-all" class="flex-1 text-xs px-2 py-1 bg-gray-100 rounded hover:bg-gray-200">Show All</button>
            <button id="visibility-hide-all" class="flex-1 text-xs px-2 py-1 bg-gray-100 rounded hover:bg-gray-200">Hide All</button>
        </div>
    </div>

    <!-- App Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
